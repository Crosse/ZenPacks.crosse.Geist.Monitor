name: ZenPacks.crosse.Geist.Monitor

classes:
    GeistMonitorDevice:
        base: [zenpacklib.Device]
        label: GeistMonitor
        properties:
            product_title:
                type: string
            product_version:
                type: string
            friendly_name:
                type: string
            sensor_count:
                type: int

    GeistClimateSensor:
        base: [zenpacklib.Component]
        label: Climate Sensor
        properties:
            serial:
                label: Serial Number
                content_width: 110
                order: 1
            temperature:
                label: Temperature (°C)
                type: float
                order: 2
            ioPort1:
                label: IO Port 1
                type: int
                order: 3
            ioPort2:
                label: IO Port 2
                type: int
                order: 4
            ioPort3:
                label: IO Port 3
                type: int
                order: 5



class_relationships:
    #- GeistDevice(geistClimateSensors) 1:MC (geist)GeistClimateSensor
    - GeistMonitorDevice 1:MC GeistClimateSensor

device_classes:
    /Environment/Geist:
        zProperties:
            zPythonClass: ZenPacks.crosse.Geist.Monitor.GeistMonitorDevice
            zSnmpMonitorIgnore: false
            zSnmpVer: 1
            zCollectorPlugins:
                - crosse.snmp.Geist.Monitor
                - zenoss.snmp.NewDeviceMap
                - zenoss.snmp.DeviceMap
                - zenoss.snmp.InterfaceMap

        templates:
            ClimateSensor:
                targetPythonClass: ZenPacks.crosse.Geist.Monitor.GeistClimateSensor
                description: Geist Climate Sensor monitoring.

                datasources:
                    temperature:
                        type: SNMP
                        oid: 1.3.6.1.4.1.21239.1.2.1.5
                        component: "${here/id}"
                        datapoints:
                            temperature:
                                rrdtype: GAUGE
                    io1:
                        type: SNMP
                        oid: 1.3.6.1.4.1.21239.1.2.1.10
                        component: "${here/id}"
                        datapoints:
                            io1:
                                rrdtype: GAUGE
                    io2:
                        type: SNMP
                        oid: 1.3.6.1.4.1.21239.1.2.1.11
                        component: "${here/id}"
                        datapoints:
                            io1:
                                rrdtype: GAUGE
                    io3:
                        type: SNMP
                        oid: 1.3.6.1.4.1.21239.1.2.1.12
                        component: "${here/id}"
                        datapoints:
                            io1:
                                rrdtype: GAUGE

                graphs:
                    Temperature:
                        units: degrees Celsius
                        graphpoints:
                            Temperature:
                                dpName: temperature_temperature
                                format: "%6.2lf°C"

                    IO Ports:
                        graphpoints:
                            IO1:
                                dpName: io1_io1
                                format: "%5.2lf"
                            IO2:
                                dpName: io2_io2
                                format: "%5.2lf"
                            IO3:
                                dpName: io3_io3
                                format: "%5.2lf"
